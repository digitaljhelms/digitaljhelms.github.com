
<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8"> 
      <title>Installing & Using Gource on OS X &mdash; digitaljhelms</title>
      <meta name="author" content="Jeremy Helms">
      <meta name="google-site-verification" content="Iufbjqonp1JRSQxOmnKxtuIs74YCg-JXs8pgdvd3YtE">
      
      <link rel="stylesheet" href="/assets/themes/solarized/css/screen.css" media="screen, projection" type="text/css">
      <link rel="alternate" href="/atom.xml" type="application/atom+xml" title="digitaljhelms">
      <link rel="icon" href="/favicon.ico">
      <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
      <script src="/assets/themes/solarized/javascripts/ender.js" type="text/javascript"></script>
      <script src="/assets/themes/solarized/javascripts/site.js" type="text/javascript"></script>
      <script type="text/javascript" src="http://cdn.onswipe.com/synapse/on.js?usr=digitaljhelms" id="onswipe_synapse"></script>
  </head>
  <body>
    
    
<article data-id="installing-and-using-gource-on-osx">
  <h1>Installing & Using Gource on OS X </h1>
  <time datetime="2011-11-09">09 November 2011</time>
  <blockquote>
<p>Gource is a software version control visualization tool.</p>

<p>Software projects are displayed by Gource as an animated tree with the root directory of the project at its centre. Directories appear as branches with files as leaves. Developers can be seen working on the tree at the times they contributed to the project.</p>
</blockquote>

<p><a href="http://code.google.com/p/gource/">http://code.google.com/p/gource/</a></p>

<h2 id="toc_0">Installing Gource Manually (w/out MacPorts or Homebrew)</h2>

<h3 id="toc_1">Install SDL</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>hg clone -u SDL-1.2 http://hg.libsdl.org/SDL SDL-1.2
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>SDL-1.2
</span><span class='line'><span class="nv">$ </span>./autogen.sh
</span><span class='line'><span class="nv">$ </span>./configure <span class="o">&amp;&amp;</span> make <span class="o">&amp;&amp;</span> sudo make install
</span></code></pre></td></tr></table></div></figure>

<h3 id="toc_2">Install SDL Image</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>hg clone -u release-1.2.10 http://hg.libsdl.org/SDL_image SDL_Image-1.2.10
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>SDL_Image-1.2.10
</span><span class='line'><span class="nv">$ </span>./autogen.sh
</span><span class='line'><span class="nv">$ </span>./configure <span class="o">&amp;&amp;</span> make <span class="o">&amp;&amp;</span> sudo make install
</span></code></pre></td></tr></table></div></figure>

<h3 id="toc_3">Install PCRE3</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>svn co svn://vcs.exim.org/pcre/code/trunk pcre
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>pcre
</span><span class='line'><span class="nv">$ </span>./autogen.sh
</span><span class='line'><span class="nv">$ </span>./configure <span class="o">&amp;&amp;</span> make <span class="o">&amp;&amp;</span> sudo make install
</span></code></pre></td></tr></table></div></figure>

<h3 id="toc_4">Install GLEW</h3>

<p>Note: Installing from the public Git repository fails on OS X.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>curl -L -O http://sourceforge.net/projects/glew/files/glew/1.7.0/glew-1.7.0.tgz
</span><span class='line'><span class="nv">$ </span>tar xvfz glew-1.7.0.tgz
</span><span class='line'><span class="nv">$ </span>rm glew-1.7.0.tgz
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>glew-1.7.0
</span><span class='line'><span class="nv">$ </span>make <span class="o">&amp;&amp;</span> sudo make install
</span></code></pre></td></tr></table></div></figure>

<h3 id="toc_5">Install Gource</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git clone git://github.com/acaudwell/Gource.git
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>Gource
</span><span class='line'><span class="nv">$ </span>git co gource-0.37
</span><span class='line'><span class="nv">$ </span>git submodule init
</span><span class='line'><span class="nv">$ </span>git submodule update
</span><span class='line'><span class="nv">$ </span>autoreconf -f -i
</span><span class='line'><span class="nv">$ </span>./configure <span class="o">&amp;&amp;</span> make <span class="o">&amp;&amp;</span> sudo make install
</span></code></pre></td></tr></table></div></figure>

<h3 id="toc_6">Usage</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>gource ./ -s 0.5 -b 000000 -1280x720
</span></code></pre></td></tr></table></div></figure>

<h2 id="toc_7">Optional Features/Installs</h2>

<h3 id="toc_8">Install FFmpeg</h3>

<p>This will enable outputting to video.</p>

<h4 id="toc_9">Yasm (requirement)</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git clone git://github.com/yasm/yasm.git
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>yasm
</span><span class='line'><span class="nv">$ </span>git co v1.2.0
</span><span class='line'><span class="nv">$ </span>./autogen.sh
</span><span class='line'><span class="nv">$ </span>./configure <span class="o">&amp;&amp;</span> make <span class="o">&amp;&amp;</span> sudo make install
</span></code></pre></td></tr></table></div></figure>

<h4 id="toc_10">LAME (optional requirement)</h4>

<p><em>Optional: This allows laying an audio track over the visualization.</em></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>curl -L -O http://sourceforge.net/projects/lame/files/lame/3.99/lame-3.99.1.tar.gz
</span><span class='line'><span class="nv">$ </span>tar xvfz lame-3.99.1.tar.gz
</span><span class='line'><span class="nv">$ </span>rm lame-3.99.1.tar.gz
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>lame-3.99.1
</span><span class='line'><span class="nv">$ </span>./configure <span class="o">&amp;&amp;</span> make <span class="o">&amp;&amp;</span> sudo make install
</span></code></pre></td></tr></table></div></figure>

<h4 id="toc_11">x264 (requirement)</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>curl -L -O ftp://ftp.videolan.org/pub/x264/snapshots/last_x264.tar.bz2
</span><span class='line'><span class="nv">$ </span>tar xvfj last_x264.tar.bz2
</span><span class='line'><span class="nv">$ </span>rm last_x264.tar.bz2
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>x264-snapshot-<span class="o">[</span>datestamp<span class="o">]</span>-<span class="o">[</span>timestamp<span class="o">]</span>
</span><span class='line'><span class="nv">$ </span>./configure --enable-shared
</span><span class='line'><span class="nv">$ </span>make <span class="o">&amp;&amp;</span> sudo make install
</span></code></pre></td></tr></table></div></figure>

<h4 id="toc_12">Xvid (requirement)</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>curl -L -O http://downloads.xvid.org/downloads/xvidcore-1.3.2.tar.gz
</span><span class='line'><span class="nv">$ </span>tar xvfz xvidcore-1.3.2.tar.gz
</span><span class='line'><span class="nv">$ </span>rm xvidcore-1.3.2.tar.gz
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>xvidcore/build/generic/
</span><span class='line'><span class="nv">$ </span>./configure <span class="o">&amp;&amp;</span> make <span class="o">&amp;&amp;</span> sudo make install
</span></code></pre></td></tr></table></div></figure>

<h4 id="toc_13">FFmpeg</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>curl -L -O http://ffmpeg.org/releases/ffmpeg-0.8.6.tar.gz
</span><span class='line'><span class="nv">$ </span>tar xvfz ffmpeg-0.8.6.tar.gz
</span><span class='line'><span class="nv">$ </span>rm ffmpeg-0.8.6.tar.gz
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>ffmpeg-0.8.6
</span><span class='line'><span class="nv">$ </span>./configure --enable-shared --enable-libmp3lame --enable-gpl --enable-libx264 --enable-libxvid
</span><span class='line'><span class="nv">$ </span>make <span class="o">&amp;&amp;</span> sudo make install
</span></code></pre></td></tr></table></div></figure>

<p><em>Note: If LAME was not installed, exclude the <code>--enable-libmp3lame</code> argument from the <code>configure</code> command.</em></p>

<h4 id="toc_14">Usage</h4>

<p>The command below will create a video at 28fps using the x264 codec in an mp4 container with an audio track over the top &#8211; the output will be the length of the video/audio track, whichever is longer.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>gource ./ -s 0.5 -b 000000 -1280x720 --output-ppm-stream - | ffmpeg -y -b 3000K -r 28 -f image2pipe -vcodec ppm -i - -i audio.mp3 -vcodec libx264 -preset slow -crf 28 -threads 0 output.mp4
</span></code></pre></td></tr></table></div></figure>

<p><em>Note: If LAME was not installed, exclude the <code>-i audio.mp3</code> argument/value from the piped <code>ffmpeg</code> command.</em></p>

<h3 id="toc_15">Gravatar Support</h3>

<p>Gource supports user images; here is a Perl script that will pull images from Gravatar based on email addresses found in <code>git-log</code>.</p>

<div><script src='https://gist.github.com/1359047.js?file='></script>
<noscript><pre><code>#!/usr/bin/perl
#fetch Gravatars
#http://code.google.com/p/gource/wiki/GravatarExample

use strict;
use warnings;

use LWP::Simple;
use Digest::MD5 qw(md5_hex);

my $size       = 90;
my $output_dir = '.git/avatar';

die(&quot;no .git/ directory found in current path\n&quot;) unless -d '.git';

mkdir($output_dir) unless -d $output_dir;

open(GITLOG, q/git log --pretty=format:&quot;%ae|%an&quot; |/) or die(&quot;failed to read git-log: $!\n&quot;);

my %processed_authors;

while(&lt;GITLOG&gt;) {
    chomp;
    my($email, $author) = split(/\|/, $_);

    next if $processed_authors{$author}++;

    my $author_image_file = $output_dir . '/' . $author . '.png';

    #skip images we have
    next if -e $author_image_file;

    #try and fetch image

    my $grav_url = &quot;http://www.gravatar.com/avatar/&quot;.md5_hex(lc $email).&quot;?d=404&amp;size=&quot;.$size; 

    warn &quot;fetching image for '$author' $email ($grav_url)...\n&quot;;

    my $rc = getstore($grav_url, $author_image_file);

    sleep(1);

    if($rc != 200) {
        unlink($author_image_file);
        next;
    }
}

close GITLOG;</code></pre></noscript></div>

<h4 id="toc_16">Usage</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>gource --user-image-dir .git/avatar/
</span></code></pre></td></tr></table></div></figure>

  
</article>





  <div id="disqus_thread"></div>
<script type="text/javascript">
    
    var disqus_shortname = 'digitaljhelms'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>






    <div id="sidebar">
      <header>
        <p><strong><a href="/">digitaljhelms<span>.github.com</span></a></strong></p>
        <p><em>haphazard tech musings...</em></p>
      </header>
      <aside>
        <section>
          <nav>
            <ul>
              
                <li>
                  <a href="/html-email-guidelines">HTML Email Guidelines</a>
                  <time datetime="2012-11-09">09 Nov 2012</time>
                </li>
              
                <li>
                  <a href="/squash-the-first-2-commits-in-a-git-repository">Squash the First 2 Commits in a Repo</a>
                  <time datetime="2012-07-12">12 Jul 2012</time>
                </li>
              
                <li>
                  <a href="/removing-items-from-js-arrays">Removing Items from JavaScript arrays</a>
                  <time datetime="2012-07-06">06 Jul 2012</time>
                </li>
              
                <li>
                  <a href="/creating-a-branch-with-no-parents-or-history">Creating a Git Branch w/out Parents</a>
                  <time datetime="2012-07-02">02 Jul 2012</time>
                </li>
              
                <li>
                  <a href="/st2-cli-project-helper-commands">Sublime Text 2 CLI Project Helper</a>
                  <time datetime="2012-06-28">28 Jun 2012</time>
                </li>
              
            </ul>
            <p><a href="/archive.html">More articles &gt;</a></p>
          </nav>
        </section>
        <section>
          <h2>about</h2>
          <p><a href="http://www.alistapart.com/articles/proud/"><em>Web Developer</em></a> since 1995. Senior Software Architect and Client-Side Technology Lead at <a href="http://fluid.com">Fluid, Inc.</a> in San Francisco. Hibernating entrepreneur after 10 yrs of new venture risk & initiative.</p>
        </section>
        <section>
          <h2>browse</h2>
          <ul>
            
            
            


  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



          </ul>
        </section>
        <section>
          <h2>elsewhere</h2>
          <ul>
            <li><a href="http://twitter.com/digitaljhelms">Twitter</a></li>
            <li><a href="http://www.linkedin.com/in/digitaljhelms">LinkedIn</a></li>
            <li><a href="http://www.facebook.com/digitaljhelms">Facebook</a></li>
            <li><a href="/oss">Open Source</a></li>
          </ul>
        </section>
      </aside>
      <footer>
        <ul>
          <li><em>authored by</em> <a href="http://jeremyhelms.com">Jeremy Helms</a></li>
          <li><em>designed by</em> <a href="http://jthom.as">JThomas</a></li>
          <li><em>generated by</em> <a href="https://github.com/mojombo/jekyll">Jekyll</a></li>
          <li><em>hosted on</em> <a href="https://github.com">GitHub</a> (<a href="https://github.com/digitaljhelms/digitaljhelms.github.com">source</a>)</li>
        </ul>
      </footer>
    </div>
    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1325083-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>
